<div class="outer-header">
  <div class="header" [class.expand]="!showYearSelector">
    <button [disabled]="!canNavigateBack" (click)="changeMonth(-1)">
      <kirby-icon name="arrow-back"></kirby-icon>
    </button>

    <div class="month-and-year">
      <span class="month">{{ activeMonthName }}</span
      ><span *ngIf="!showYearSelector" class="year">{{ activeYear }}</span>
    </div>

    <button [disabled]="!canNavigateForward" (click)="changeMonth(1)">
      <kirby-icon name="arrow-more"></kirby-icon>
    </button>
  </div>
  <!-- TODO: Set selected year / selectedIndex based on active month/year -->
  <kirby-dropdown
    *ngIf="showYearSelector"
    [selectedIndex]="0"
    [items]="this.years"
    class="dropdown align-end"
    (change)="changeYear($event)"
  >
  </kirby-dropdown>
</div>

<table class="calendar-table">
  <thead class="calendar-table-header">
    <th *ngFor="let weekDay of weekDays">{{ weekDay }}</th>
  </thead>

  <tbody>
    <tr *ngFor="let week of month">
      <td *ngFor="let day of week">
        <div
          (click)="onDateSelected(day)"
          class="{{ day.cssClasses }}"
          [class.selected]="day.isSelected"
        >
          {{ day.date }}
        </div>
      </td>
    </tr>
  </tbody>
</table>

<!-- <iframe src="kirby/components/calendar/calendar.webview.html" #calendarContainer style="width: 320px; height: 304px; border: 0"> -->
