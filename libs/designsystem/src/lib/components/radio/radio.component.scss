@import '../../scss/utils';

$radio-icon-padding: size('xxxxs');
$radio-icon-size: size('m') - ($radio-icon-padding * 2);
$radio-icon-mark-size: 60%;

:host {
  display: inline-block;

  &.has-label {
    display: block;

    div.wrapper {
      position: relative;
      display: inline-flex;
      align-items: center;
      vertical-align: top;
    }

    ion-radio {
      position: static;
      margin-right: size('xxxxs');
    }
  }

  &[disabled] {
    color: #{get-text-color('semi-dark')};
    ion-radio {
      opacity: 1; // Reset Ionic disabled style
      --color: #{get-color('medium')};
      --color-checked: #{get-color('medium')};
      &::part(container) {
        background-color: get-color('semi-light');
      }
    }
  }
}

ion-radio {
  height: $fat-finger-size;
  width: $fat-finger-size;
  padding: #{($fat-finger-size - $radio-icon-size) / 2}; // Making clickable area bigger without making icon bigger
  box-sizing: border-box; // Ensure padding is not added to radio width/height
  --border-width: 1px;
  --color: #{get-color('semi-dark')};
  --color-checked: #{get-color('success')};

  &::part(container) {
    background-color: get-color('white');
  }

  &::part(mark) {
    width: $radio-icon-mark-size;
    height: $radio-icon-mark-size;
  }

  &:active {
    --color: transparent;

    &::part(container) {
      background-color: get-color('white-shade');
    }
  }

  // Only apply focus ring if pointer device can hover
  // (effectively desktop/mouse devices):
  @include focus() {
    &::part(container) {
      // Apply focus ring through box-shadow to keep circle shape and default border:
      box-shadow: 0 0 0 1px var(--kirby-background-color), 0 0 0 3px #{$focus-ring-color};
    }
  }

  &.radio-checked {
    --border-width: 0px;

    &:not(:focus) {
      &::part(container) {
        box-shadow: get-elevation(2);
      }
    }
  }
}

:host-context(kirby-item) {
  z-index: z('default'); // Makes whole kirby-item clickable above item-inner.

  &[slot='start'] {
    margin-inline-end: size('xxxs'); // TODO: Do we need a right margin??
    margin-inline-start: size('xs') * -1; // TODO: Should we take fat finger size into consideration?
  }
}
