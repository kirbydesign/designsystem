<ion-segment
  [value]="value?.id"
  [scrollable]="disableChangeOnSwipe || mode !== 'default'"
  (ionChange)="onSegmentSelect($event.detail.value)"
  (click)="preventOutsideClick($event)"
>
  <ng-container *ngFor="let item of items">
    <ion-segment-button [value]="item.id">{{ item.text }} </ion-segment-button>
    <div class="badge-container" *ngIf="item.badge">
      <kirby-badge
        role="text"
        [attr.aria-label]="item.badge.description"
        [themeColor]="item.badge.themeColor"
      >
        <ng-container *ngIf="item.badge.icon; else badgeContent">
          <kirby-icon
            *ngIf="$any(item).badge.isCustomIcon; else defaultIconName"
            [customName]="item.badge.icon"
          ></kirby-icon>
          <ng-template #defaultIconName>
            <kirby-icon [name]="item.badge.icon"></kirby-icon>
          </ng-template>
        </ng-container>
        <ng-template #badgeContent>
          {{ item.badge.content }}
        </ng-template>
      </kirby-badge>
    </div>
  </ng-container>
</ion-segment>
