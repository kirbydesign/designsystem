@import '../../scss/utils';

$border-radius: 6px;
$checkbox-icon-size: size('m');
$checkbox-size-xs: size('l');
$checkbox-size-sm: $fat-finger-size;
$checkbox-size-md: size('xxxl');
$checkbox-margin-right: size('xs');

:host {
  display: inline-block;

  &.attention-level1 ion-checkbox {
    --checkmark-color: #{get-color('black')};
    --background-checked: #{get-color('success')};
    --border-color-checked: #{get-color('success')};

    &:active {
      --background-checked: #{get-color('success-shade')};
      --border-color-checked: #{get-color('success-shade')};
    }
  }

  &.attention-level2 ion-checkbox {
    --checkmark-color: #{get-color('white')};
    --background-checked: #{get-color('black')};
    --border-color-checked: #{get-color('black')};

    &:active {
      --checkmark-color: #{get-color('white-shade')};
      --background-checked: #{get-color('black-tint')};
      --border-color-checked: #{get-color('black-tint')};
    }
  }

  &.error ion-checkbox {
    --border-color: #{get-color('danger')};
  }

  &[disabled] {
    color: #{get-text-color('semi-dark')};

    ion-checkbox {
      opacity: 1;
      --checkmark-color: #{get-color('semi-dark')};
      --background: #{get-color('semi-light')};
      --background-checked: #{get-color('semi-light')};
      --border-color: #{get-color('medium')};
      --border-color-checked: #{get-color('semi-light')};
    }
  }

  ion-checkbox {
    --checkmark-width: #{size('xxxs')};
    --background: #{get-color('white')};
    --border-width: 1px;
    --border-color: #{get-color('semi-dark')};
    --border-radius: #{$border-radius};

    // Making clickable area bigger without making icon bigger
    --size: #{$checkbox-size-sm};
    --kirby-checkbox-padding: calc((var(--size) - #{$checkbox-icon-size}) / 2);
    padding: var(--kirby-checkbox-padding);
    box-sizing: border-box; // Ensure padding is not added to checkbox width/height

    &::part(container) {
      padding: size('xxxs');
    }

    &:focus-within::part(container) {
      @media (hover: hover) {
        box-shadow: 0 0 0 1px var(--kirby-background-color), 0 0 0 2px #{$focus-ring-color};
        border-radius: $border-radius;
      }
    }
    &:active {
      --background: #{get-color('white-shade')};
    }
  }

  &.has-label {
    display: block;

    div {
      position: relative;
      display: inline-flex;
      align-items: center;
      vertical-align: top;
      padding-right: size('s');
    }
    ion-checkbox {
      position: static;
      margin-right: Max(calc(#{$checkbox-margin-right} - var(--kirby-checkbox-padding)), 0px);
    }
  }

  :host-context(.checkbox-xs),
  &.xs {
    ion-checkbox {
      --size: #{$checkbox-size-xs};
    }
  }

  :host-context(.checkbox-sm),
  &.sm {
    ion-checkbox {
      --size: #{$checkbox-size-sm};
    }
  }

  :host-context(.checkbox-md),
  &.md {
    ion-checkbox {
      --size: #{$checkbox-size-md};
    }
  }
}

:host-context(kirby-item) {
  z-index: z('default'); // Makes whole kirby-item clickable above item-inner.

  ion-checkbox {
    --size: #{$checkbox-icon-size};
    padding: 0;
  }

  &[slot='start'] {
    margin: 0;
    margin-inline-end: size('s');
  }
}
