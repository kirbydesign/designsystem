.kirby-line-clamp {
  line-height: var(--line-height);
  overflow: hidden;
  // Work around weird bug by setting visibility
  // See https://bugs.webkit.org/show_bug.cgi?id=207013
  // and https://stackoverflow.com/questions/41995229/webkit-line-clamp-does-not-work-on-chrome-unless-i-make-some-unrelated-css-chan
  visibility: visible;
}

@supports (-webkit-line-clamp: 1) {
  .kirby-line-clamp {
    // Non-standard line-clamp with wide browser support
    // See https://caniuse.com/mdn-css_properties_-webkit-line-clamp
    display: -webkit-box;
    -webkit-line-clamp: var(--line-clamp, none);
    -webkit-box-orient: vertical;
  }
}

// Fallback solution
@supports not (-webkit-line-clamp: 1) {
  .kirby-line-clamp {
    max-height: calc(var(--line-clamp) * var(--line-height));
    position: relative;

    // Ellipsis
    &::before {
      content: 'â€¦';
      position: absolute;
      right: 0;
      bottom: 0;
      background-color: var(--kirby-background-color);
      line-height: var(--line-height);
      height: var(--line-height);
    }

    // Cover ellipsis
    // when number of lines is less than or equal to line-clamp value
    &::after {
      content: '';
      position: absolute;
      right: 0;
      width: 1em;
      height: var(--line-height);
      line-height: var(--line-height);
      background-color: var(--kirby-background-color);
    }
  }
}
