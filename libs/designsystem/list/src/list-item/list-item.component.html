<ng-container [ngSwitch]="device === 'touch' || swipeActions?.length === 0">
  <ng-container *ngSwitchCase="true">
    <ion-item-sliding
      [class.selected]="isSelected"
      [kirbyListItemColor]="getItemColor"
      [item]="item"
      [disabled]="_isSwipingEnabled ? null : true"
      keyHandler
      [ngClass]="boundaryClass"
      (click)="_onItemSelect(item)"
    >
      <ng-container
        *ngTemplateOutlet="swipeActionsTemplate; context: { $implicit: item }"
      ></ng-container>
      <ng-container *ngTemplateOutlet="itemTemplate; context: { $implicit: item }"></ng-container>
    </ion-item-sliding>
  </ng-container>

  <ng-container *ngSwitchCase="false">
    <div
      #container
      [class.menu-item-disabled]="(item | getActions: swipeActions).length <= 0"
      class="list-item-menu"
    >
      <ng-container *ngTemplateOutlet="itemTemplate; context: { $implicit: item }"></ng-container>
      <ng-container [ngSwitch]="swipeActions.length > 1">
        <kirby-menu
          *ngSwitchCase="true"
          [isDisabled]="(item | getActions: swipeActions).length <= 0"
          class="menu"
          [portalOutletConfig]="portalOutletConfig"
          [placement]="'bottom-end'"
        >
          <kirby-item
            *ngFor="let action of swipeActions; let i = index"
            [selectable]="true"
            (click)="_onSwipeActionSelect(action, item, $event)"
          >
            <div class="item-content">
              <label>{{ action | getActionTitle: [item] }}</label>
            </div>
          </kirby-item>
        </kirby-menu>

        <ng-container *ngSwitchCase="false">
          <ng-container
            *ngTemplateOutlet="singleActionTemplate; context: { $implicit: swipeActions[0] }"
          ></ng-container>
        </ng-container>
      </ng-container>
    </div>
  </ng-container>
</ng-container>

<ng-template #swipeActionsTemplate let-item>
  <ion-item-options *ngIf="_hasSwipeActions(item)" [side]="_getSwipeActionEnd(item)">
    <div class="swipe-action">
      <ng-container *ngFor="let swipeAction of _getSwipeActions(item)">
        <ion-item-option
          [ngClass]="_getSwipeActionType(swipeAction, item)"
          (click)="_onSwipeActionSelect(swipeAction, item, $event)"
        >
          <div class="item-content">
            <kirby-icon
              *ngIf="_getSwipeActionIcon(swipeAction, item)"
              size="sm"
              [name]="_getSwipeActionIcon(swipeAction, item)"
            ></kirby-icon>
            <ion-label>
              {{ _getSwipeActionTitle(swipeAction, item) }}
            </ion-label>
          </div>
        </ion-item-option>
      </ng-container>
    </div>
  </ion-item-options>
</ng-template>

<ng-template #singleActionTemplate let-action>
  <button
    class="menu"
    kirby-button
    type="button"
    [noDecoration]="true"
    (click)="_onSwipeActionSelect(action, item, $event)"
  >
    <kirby-icon name="{{ action | getActionIcon: [item] }}"></kirby-icon>
  </button>
</ng-template>
