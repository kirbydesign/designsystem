<ion-modal
  class="kirby-modal kirby-overlay kirby-modal-{{ size }}"
  [ngClass]="[
    flavor === 'compact' ? 'kirby-modal-compact' : 'kirby-' + flavor,
    interactWithBackground ? 'interact-with-background' : ''
  ]"
  [isOpen]="isOpen"
  [trigger]="trigger"
  [canDismiss]="_canDismiss"
  [showBackdrop]="!interactWithBackground"
  [style.--kirby-modal-height]="customHeight"
  (willPresent)="_onWillPresent($event)"
  (didPresent)="_onDidPresent($event)"
  (willDismiss)="_onWillDismiss($event)"
  (didDismiss)="_onDidDismiss($event)"
>
  <ng-template>
    <kirby-modal-compact-wrapper
      *ngIf="flavor === 'compact'; else modalWrapper"
      [config]="_config"
      [content]="template"
    ></kirby-modal-compact-wrapper>
  </ng-template>
</ion-modal>

<ng-template #modalWrapper>
  <kirby-modal-wrapper
    class="ion-page"
    [config]="_config"
    [content]="template"
    [scrollDisabled]="scrollDisabled"
  ></kirby-modal-wrapper>
</ng-template>
