<ion-header [class.content-scrolled]="isContentScrolled" (touchstart)="onHeaderTouchStart($event)">
  <ion-toolbar>
    <ion-title></ion-title>
    <ion-buttons
      slot="secondary"
      *ngIf="config.flavor === 'drawer' && config.drawerSupplementaryAction"
    >
      <button
        kirby-button
        attentionLevel="3"
        size="md"
        (click)="config.drawerSupplementaryAction.action($event)"
      >
        <kirby-icon [name]="config.drawerSupplementaryAction.iconName"></kirby-icon>
      </button>
    </ion-buttons>
    <ion-buttons slot="primary">
      <button
        kirby-button
        attentionLevel="3"
        size="md"
        [noDecoration]="config.interactWithBackground"
        (click)="close()"
      >
        <kirby-icon name="close"></kirby-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [scrollEvents]="scrollEventsEnabled">
  <ion-header *ngIf="_hasCollapsibleTitle" collapse="condense">
    <ion-toolbar>
      <span class="kirby-text-xlarge" #contentTitle></span>
    </ion-toolbar>
  </ion-header>

  <!-- Outlet for ModalController -->
  <ng-container
    *ngComponentOutlet="config.component; injector: componentPropsInjector"
  ></ng-container>

  <!-- Outlet for projected content -->
  <ng-container *ngTemplateOutlet="content; injector: modalWrapperInjector"></ng-container>

  <!-- Outlet for route-based modal -->
  <router-outlet
    name="kirbyModalWrapperOutlet"
    [style.visibility]="config.modalRoute ? 'visible' : 'hidden'"
  ></router-outlet>
</ion-content>
