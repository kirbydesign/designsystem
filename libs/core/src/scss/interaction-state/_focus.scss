@use 'sass:map';
@use "sass:selector";
@use '../utils';
@use '../themes/colors';

@mixin apply-focus($shadow: null, $gap: utils.size('xxxxs')) {
  &:focus-within {
    @include _focus-ring($shadow, $gap);
  }
}

@mixin apply-focus-part($part, $shadow: null, $gap: utils.size('xxxxs')) {
  &:focus-within::part(#{$part}) {
    @include _focus-ring($shadow, $gap);
  }
}

@mixin apply-focus-visible($shadow: null, $gap: utils.size('xxxxs')) {
  $reset-focus-ring: 0 0 0 0 transparent;
  &:focus {
    @include _focus-ring($shadow, $gap);
  }

  &:focus:not(:focus-visible) {
    box-shadow: $shadow, $reset-focus-ring;
  }

  &:focus-visible {
    @include _focus-ring($shadow, $gap);
  }
}

@mixin _focus-ring($shadow, $gap) {
  $stroke-width: utils.size('xxxxs');
  box-shadow: #{$shadow}, 0 0 0 $gap #{utils.get-color('background-color')},
    0 0 0 $gap + $stroke-width colors.$focus-ring-color;
  transition: box-shadow utils.get-transition-duration('quick');
}
